<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>

<div class="container">
    <h1>Admin Analytics Dashboard</h1>

    <p><b>Total Users:</b> <span id="total"></span></p>
    <p><b>Most Common Category:</b> <span id="category"></span></p>

    <canvas id="userChart"></canvas>
</div>

<script>
fetch("/admin_data")
.then(res => res.json())
.then(data => {
    document.getElementById("total").innerText = data.total_users;
    document.getElementById("category").innerText =
        data.most_common_category.length > 0
        ? data.most_common_category[0][0]
        : "No data yet";

    const ctx = document.getElementById("userChart").getContext("2d");

    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ["Total Users"],
            datasets: [{
                label: "Users",
                data: [data.total_users],
                backgroundColor: "#4CAF50"
            }]
        }
    });
});
</script>

</body>
</html>
